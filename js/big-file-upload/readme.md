# 大文件上传

- 问题
  等待
  失败 需要重试   

- 切片上传
   1G  50片
   失败的
   断点续传
   - 切片大小的规则
     一般切片大小为1 - 5 MB
     较大的切片能够减少网络请求次数，提高上传效率。(多路复用的限制)
     过大的切片可能会导致网络请求超时，增加上传失败的可能性。
     较小的切片增加网络请求次数以及服务器压力(服务器端并发数，有上限，性能开销大)
    - 切片是什么？
      slice.Flie.__proto__ = Blob.prototype.slice
      File (整体) --> Blob(二进制对象) -->  二进制(text/md  image/jpg)
      Blob 帮助前端处理二进制
      切片是Blob  上传的是二进制对象

- http
  大文件  普通上传 1个http连接
  分片 http  2.0  具有多路复用  二进制帧和流 ID

- 优质用户体验

  进度条  暂停  断点续传  文件实际上是二进制流的上传
  - input type=file  丑陋
  - 进度条是用户体验的一部分，让用户了解文件上传的进度，告知用户




- 考察全栈能力
  - 前端  upload 
    - File 对象  html5 新特性  让js可以访问文件系统
  - 后端 

- 写一遍，理解深入